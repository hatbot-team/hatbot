<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <script
     src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js">
    </script>

    <script type='text/javascript'>
    var getRandomWord = function(host) {
      return $.ajax({ async: false,
                        url: "http://" + host + "/random_word"
                    })
                .responseText;
    }
    var getRandomExplanation = function(word, host) {
      return $.ajax({    async: false,
                           url: "http://" + host + "/explain",
                          data: {word: word},
                      dataType: "json"
                    })
                .responseJSON;
    }
    var sendResponse = function(explanation, result, host) {
      var data = { result: result,
                       id: explanation.id
                 };
      $.ajax({        type: "POST",
                       url: "http://" + host + "/statistics/update",
                   headers: { 'Content-Type': 'application/json'
                            },
                      data: JSON.stringify(data),
             });           
    }
    $(document).ready(function() {
      var word = getRandomWord("127.0.0.1:8080");
      $("#word").append(word);
      var explanation = getRandomExplanation(word, "127.0.0.1:8080");
      $("#explanation").append(explanation.text);
      sendResponse(explanation, "SUCCESS", "127.0.0.1:8080");
    });
    </script>
    <title>SOME</title>
  </head>
  <body>
    <p id="word">Word: </p>
    <p id="explanation">Explanation: </p>
    <p id="response">Response: </p>
  </body>
</html>